(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{206:function(e,t,n){e.exports=n(409)},261:function(e,t){},263:function(e,t){},295:function(e,t){},296:function(e,t){},394:function(e,t,n){},408:function(e,t,n){},409:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(37),c=n.n(i),o=n(65),s=n(189),l=n(190),u=n(191);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=n(4),h=n(5),d=n(8),p=n(6),b=n(7),f=n(51),v=n(18),E=n.n(v),O=n(29),y=n(19),g=n(27),j=n(411),k=n(192),S=n(419),w=n(197),C=n(418),I=n(26),x=n(195),M=n(196),N=n.n(M),D=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.handleSignout;return a.createElement(a.Fragment,null,a.createElement(x.a,{className:"text-light"},a.createElement(N.a,{as:"span"},t)),a.createElement(w.a,{className:"text-light",variant:"link",onClick:n},a.createElement(I.a,{icon:"sign-out-alt"})))}}]),t}(a.Component),R=function e(){Object(m.a)(this,e),this.market=void 0,this.restServer=void 0,this.accountServer=void 0,this.market={id:1,color:"danger",name:"Un Market"},this.restServer={url:"http://api-market1-stockchainz.serveo.net/api",wsURL:"ws://api-market1-stockchainz.serveo.net",authURL:"http://api-market1-stockchainz.serveo.net/auth"},this.accountServer={url:"http://account-market1-stockchainz.serveo.net/api"}},T=new R,A=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.username,t=this.props.handleSignout;return a.createElement(S.a,{fixed:"top",variant:"dark",bg:"dark",className:"shadow"},a.createElement(j.a,null,a.createElement(k.LinkContainer,{to:"/"},a.createElement(S.a.Brand,{className:"col-sm-3 col-md-2 mr-0 d-flex align-items-center"},a.createElement(w.a,{size:"sm",disabled:!0,variant:"light",className:"p-0 mr-2",style:{opacity:1}},a.createElement(I.a,{icon:"store",className:"text-".concat(T.market.color)})),a.createElement("span",null,T.market.name))),a.createElement(C.a,{className:"ml-auto"},a.createElement(D,{name:e,handleSignout:t}))))}}]),t}(a.Component),P=n(58),q=n(35),H=n(22),F=n.n(H),Y=n(111),L=n.n(Y),B=n(200),z=n.n(B),U=n(56),W=new R,G=function(){function e(t,n){Object(m.a)(this,e),this.type=void 0,this.id=void 0,this.type=t,this.id=n}return Object(h.a)(e,[{key:"getNamespacedType",value:function(){return e.getNamespaced(this.type)}},{key:"getFullyQualifiedIdentifier",value:function(){return"".concat(this.getNamespacedType(),"#").concat(this.id)}},{key:"getResourceLocator",value:function(){return"resource:".concat(this.getFullyQualifiedIdentifier())}}],[{key:"getNamespaced",value:function(t){return"".concat(e.NS,".").concat(t)}},{key:"split",value:function(e){var t=e.split("#"),n=Object(q.a)(t,2),a=n[0],r=n[1],i=a.split(".");return[i[i.length-1],r]}}]),e}();G.NS="com.stockchainz.net";var $=function(e){function t(e,n,a){var r;return Object(m.a)(this,t),(r=Object(d.a)(this,Object(p.a)(t).call(this,e,n))).name=void 0,r.name=a,r}return Object(b.a)(t,e),Object(h.a)(t,null,[{key:"requestSession",value:function(){return new Promise(function(){var e=Object(O.a)(E.a.mark(function e(n,a){var r,i,c,o,s,l,u,m;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("".concat(W.restServer.url,"/wallet"),{withCredentials:!0});case 3:if(r=e.sent,i=r.data,c=void 0,!(i.length>0)){e.next=15;break}return e.next=9,F.a.get("".concat(W.restServer.url,"/system/ping"),{withCredentials:!0});case 9:return o=e.sent,s=G.split(o.data.participant),l=Object(q.a)(s,2),u=l[0],m=l[1],e.next=13,F.a.get("".concat(W.restServer.url,"/").concat(u,"/").concat(m),{withCredentials:!0});case 13:o=e.sent,c=new t(u,m,o.data.name);case 15:n({loggedIn:!0,user:c}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),e.t0.response&&401===e.t0.response.status?n({loggedIn:!1}):a(e.t0);case 21:case"end":return e.stop()}},e,null,[[0,18]])}));return function(t,n){return e.apply(this,arguments)}}())}},{key:"requestRegister",value:function(e,n){var a=z.a.createHash("sha1").update(e).update(n).digest("hex"),r=new t(n,a,e);return new Promise(function(){var t=Object(O.a)(E.a.mark(function t(i,c){var o,s,l,u,m,h,d,p,b,f,v,O,y,g,j,k;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.a.get("".concat(W.accountServer.url,"/").concat(n));case 3:if(o=t.sent,s=o.data.some(function(t){return t.name===e}),l=!0,!s){t.next=15;break}return t.next=9,F.a.get("".concat(W.accountServer.url,"/system/identities"));case 9:u=t.sent,m=u.data.filter(function(e){return e.participant==="resource:org.hyperledger.composer.system.NetworkAdmin#admin".concat(W.market.id)}),h=Object(q.a)(m,1),d=h[0],p=u.data.filter(function(e){return e.participant===r.getResourceLocator()&&e.issuer===d.issuer}),b=Object(q.a)(p,1),f=b[0],l=!f,t.next=17;break;case 15:return t.next=17,F.a.post("".concat(W.accountServer.url,"/").concat(r.type),(v={$class:r.getNamespacedType()},Object(P.a)(v,n.toLowerCase()+"ID",a),Object(P.a)(v,"name",e),v));case 17:if(l){t.next=19;break}throw new Error("Account already exists!");case 19:return O={participant:r.getFullyQualifiedIdentifier(),userID:a,options:{}},t.next=22,F.a.post("".concat(W.accountServer.url,"/system/identities/issue"),O,{responseType:"blob"});case 22:return y=t.sent,g=y.data,j=new File([g],"".concat(a,".card"),{type:"application/octet-stream",lastModified:Date.now()}),(k=new FormData).append("card",j),t.next=29,F.a.post("".concat(W.restServer.url,"/wallet/import"),k,{withCredentials:!0,headers:{"content-type":"multipart/form-data"}});case 29:i(r),t.next=35;break;case 32:t.prev=32,t.t0=t.catch(0),c(t.t0);case 35:case"end":return t.stop()}},t,null,[[0,32]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"requestSignout",value:function(){return F.a.get("".concat(W.restServer.authURL,"/logout"),{withCredentials:!0})}}]),t}(G),J=function(e){function t(e,n){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).call(this,t.TYPE,e,n))}return Object(b.a)(t,e),Object(h.a)(t,null,[{key:"requestData",value:function(e){return new Promise(function(){var n=Object(O.a)(E.a.mark(function n(a,r){var i;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t.cache[e]){n.next=6;break}return n.next=4,F.a.get(W.restServer.url+"/Seller/"+e,{withCredentials:!0});case 4:i=n.sent,t.cache[e]=new t(e,i.data.name);case 6:a(t.cache[e]),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),r(n.t0);case 12:case"end":return n.stop()}},n,null,[[0,9]])}));return function(e,t){return n.apply(this,arguments)}}())}}]),t}($);J.TYPE="Seller",J.cache={};var K=function(e){function t(e,n){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).call(this,t.TYPE,e,n))}return Object(b.a)(t,e),t}($);K.TYPE="Buyer";var Q,_=function(e){function t(e,n,a,r){var i,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return Object(m.a)(this,t),(i=Object(d.a)(this,Object(p.a)(t).call(this,t.TYPE,e))).name=void 0,i.description=void 0,i.amount=void 0,i.seller=void 0,i.name=n,i.description=a,i.amount=c,i.seller=r,i}return Object(b.a)(t,e),Object(h.a)(t,null,[{key:"requestCreate",value:function(e,n){var a="IT_"+L()();return new Promise(function(){var r=Object(O.a)(E.a.mark(function r(i,c){return E.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,F.a.post(W.restServer.url+"/CreateItem",{$class:G.getNamespaced("CreateItem"),itemID:"IT_"+L()(),name:e,description:n,transactionId:"",timestamp:(new Date).toISOString()},{withCredentials:!0});case 3:i(new t(a,e,n)),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),c(r.t0);case 9:case"end":return r.stop()}},r,null,[[0,6]])}));return function(e,t){return r.apply(this,arguments)}}())}},{key:"requestEdit",value:function(e,t){return F.a.post(W.restServer.url+"/UpdateItem",{$class:G.getNamespaced("UpdateItem"),item:e.id,newDescription:t,transactionId:"",timestamp:(new Date).toISOString()},{withCredentials:!0})}},{key:"requestDelete",value:function(e){return F.a.post(W.restServer.url+"/DeleteItem",{$class:G.getNamespaced("DeleteItem"),item:e.getResourceLocator(),transactionId:"",timestamp:(new Date).toISOString()},{withCredentials:!0})}},{key:"requestRestock",value:function(e,t){return F.a.post(W.restServer.url+"/RestockItem",{$class:G.getNamespaced("RestockItem"),item:e.getResourceLocator(),amount:t,transactionId:"",timestamp:(new Date).toISOString()},{withCredentials:!0})}},{key:"mapToItem",value:function(e){return new Promise(function(){var n=Object(O.a)(E.a.mark(function n(a,r){var i,c,o,s;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=G.split(e.seller),c=Object(q.a)(i,2),o=c[1],n.next=4,J.requestData(o);case 4:s=n.sent,a(new t(e.itemID,e.name,e.description,s,e.amount)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),r(n.t0);case 11:case"end":return n.stop()}},n,null,[[0,8]])}));return function(e,t){return n.apply(this,arguments)}}())}},{key:"requestFetchAll",value:function(){return new Promise(function(){var e=Object(O.a)(E.a.mark(function e(n,a){var r,i,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get(W.restServer.url+"/Item",{withCredentials:!0});case 3:return r=e.sent,i=r.data,e.next=7,Promise.all(i.map(function(){var e=Object(O.a)(E.a.mark(function e(n){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.mapToItem(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 7:c=e.sent,n(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t,n){return e.apply(this,arguments)}}())}},{key:"requestData",value:function(e){return new Promise(function(){var n=Object(O.a)(E.a.mark(function n(a,r){var i,c,o,s,l,u;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t.cache[e]){n.next=11;break}return n.next=4,F.a.get(W.restServer.url+"/Item/"+e,{withCredentials:!0});case 4:return i=n.sent,c=i.data,o=G.split(c.seller),s=Object(q.a)(o,2),l=s[1],n.next=9,J.requestData(l);case 9:u=n.sent,t.cache[e]=new t(c.itemID,c.name,c.description,u,c.amount);case 11:a(t.cache[e]),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),r(n.t0);case 17:case"end":return n.stop()}},n,null,[[0,14]])}));return function(e,t){return n.apply(this,arguments)}}())}}]),t}(G);_.TYPE="Item",_.cache={},function(e){e.RESTOCK="RESTOCK",e.SALE="SALE"}(Q||(Q={}));var V=function(e){function t(e,n,a){var r;return Object(m.a)(this,t),(r=Object(d.a)(this,Object(p.a)(t).call(this,t.TYPE,e))).itemID=void 0,r.changes=void 0,r.itemID=n,r.changes=a,r}return Object(b.a)(t,e),Object(h.a)(t,null,[{key:"requestOfItem",value:function(e){return new Promise(function(){var n=Object(O.a)(E.a.mark(function n(a,r){var i,c,o,s,l,u;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,F.a.get(W.restServer.url+"/queries/queryInventory",{params:{item:e.getResourceLocator()},withCredentials:!0});case 3:i=n.sent,c=i.data[0],o=c.changes.map(function(e){return{amount:e.amount,type:e.type}}),s=G.split(c.item),l=Object(q.a)(s,2),u=l[1],a(new t(c.invID,u,o)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),r(n.t0);case 13:case"end":return n.stop()}},n,null,[[0,10]])}));return function(e,t){return n.apply(this,arguments)}}())}}]),t}(G);V.TYPE="Inventory";var X=function(e){function t(e,n,a,r){var i,c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(m.a)(this,t),(i=Object(d.a)(this,Object(p.a)(t).call(this,t.TYPE,e))).item=void 0,i.amount=void 0,i.confirmed=void 0,i.buyer=void 0,i.item=n,i.amount=a,i.buyer=r,i.confirmed=c,i}return Object(b.a)(t,e),Object(h.a)(t,null,[{key:"requestCreate",value:function(e,t){return F.a.post(W.restServer.url+"/PlaceOrder",{$class:G.getNamespaced("PlaceOrder"),item:e.getResourceLocator(),amount:t,transactionId:"",timestamp:(new Date).toISOString()},{withCredentials:!0})}},{key:"requestConfirm",value:function(e){return F.a.post(W.restServer.url+"/ConfirmSale",{$class:G.getNamespaced("ConfirmSale"),sale:e.getResourceLocator(),transactionId:"",timestamp:(new Date).toISOString()},{withCredentials:!0})}},{key:"mapToSale",value:function(e){return new Promise(function(){var n=Object(O.a)(E.a.mark(function n(a,r){var i,c,o,s,l,u,m,h,d;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=G.split(e.item),c=Object(q.a)(i,2),o=c[1],s=G.split(e.buyer),l=Object(q.a)(s,2),u=l[1],m=new K(u,""),n.prev=4,n.next=7,_.requestData(o);case 7:h=n.sent,a(new t(e.saleID,h,e.amount,m,"CONFIRMED"===e.status)),n.next=20;break;case 11:if(n.prev=11,n.t0=n.catch(4),404!==n.t0.response.status){n.next=19;break}console.log(n.t0.response),d=new _("","",""),a(new t(e.saleID,d,e.amount,m,"CONFIRMED"===e.status)),n.next=20;break;case 19:throw n.t0;case 20:n.next=25;break;case 22:n.prev=22,n.t1=n.catch(0),r(n.t1);case 25:case"end":return n.stop()}},n,null,[[0,22],[4,11]])}));return function(e,t){return n.apply(this,arguments)}}())}},{key:"requestFetchAll",value:function(){var e=this;return new Promise(function(){var t=Object(O.a)(E.a.mark(function t(n,a){var r,i,c;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.a.get(W.restServer.url+"/Sale",{withCredentials:!0});case 3:return r=t.sent,i=r.data,t.next=7,Promise.all(i.map(function(){var t=Object(O.a)(E.a.mark(function t(n){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.mapToSale(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 7:c=t.sent,n(c.filter(function(e){return""!==e.item.id})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a(t.t0);case 14:case"end":return t.stop()}},t,null,[[0,11]])}));return function(e,n){return t.apply(this,arguments)}}())}}]),t}(G);X.TYPE="Sale";var Z=function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,null,[{key:"parseError",value:function(e){if(e.response){var t=e.response.data.error.message;return-1!==t.indexOf("AccessException")?"Unallowed access":(t=(t=(t=t.split("\n")[1]||t).slice(t.lastIndexOf("Error"))).slice(t.lastIndexOf(":")),t=U.trim(t))}return e.message}}]),e}(),ee=n(17),te=n(415),ne=(n(394),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.size;return a.createElement(I.a,Object.assign({},this.props,{size:e,icon:"circle-notch",className:"loader"}))}}]),t}(a.Component)),ae=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.createElement("span",null,a.createElement(ne,null),a.createElement("span",{className:"ml-2"},"Fetching data..."))}}]),t}(a.Component),re=n(416),ie=n(417),ce=n(412),oe=n(204),se=n(413),le=n(203),ue=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onHide,n=e.shown,r=e.item,i=e.amount,c=e.processing,o=this.props,s=o.handleIncrementAmount,l=o.handleDecrementAmount,u=o.handleChangeAmount,m=o.handleSubmit;return a.createElement(re.a,{show:n,onHide:t,backdrop:!c||"static"},a.createElement(re.a.Header,{closeButton:c},a.createElement(re.a.Title,null,"Order item")),a.createElement(re.a.Body,null,a.createElement("strong",null,"You are ordering item: ",r&&r.name),a.createElement(ie.a.Group,{as:ce.a},a.createElement(oe.a,{sm:"6"},a.createElement(ie.a.Label,null,"Amount to order: ")),a.createElement(oe.a,{sm:"4",className:"ml-auto"},a.createElement(se.a,{size:"sm"},a.createElement(se.a.Prepend,null,a.createElement(w.a,{disabled:i<=0,variant:"outline-secondary",onClick:l},a.createElement(I.a,{icon:"minus"}))),a.createElement(le.a,{value:i.toString(),onChange:u,type:"number"}),a.createElement(se.a.Append,null,a.createElement(w.a,{variant:"outline-secondary",onClick:s},a.createElement(I.a,{icon:"plus"}))))))),a.createElement(re.a.Footer,null,a.createElement(w.a,{variant:"outline-secondary",disabled:c,onClick:t},"Cancel"),a.createElement(w.a,{variant:"primary",disabled:c||0===i,onClick:m},c&&a.createElement(ne,null)," Submit")))}}]),t}(a.Component),me=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state=void 0,n.state={amount:0,processing:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleSubmit",value:function(){var e=this,t=this.props,n=t.item,a=t.onHide,r=this.props,i=r.handleSuccess,c=r.handleError,o=this.state.amount;this.setState({processing:!0}),X.requestCreate(n,o).then(function(e){ee.a.notify("\u2714 Successfully placed order",{position:"bottom-right",duration:3e3}),i&&i()}).catch(function(e){ee.a.notify("\u274c Failed to place order: "+Z.parseError(e),{position:"bottom-right",duration:3e3}),c&&c(e)}).finally(function(){e.setState({processing:!1}),a()})}},{key:"handleChangeAmount",value:function(e){var t=Number.parseInt(e.target.value);t=Math.max(0,t),this.setState({amount:t})}},{key:"handleIncrementAmount",value:function(){this.setState({amount:this.state.amount+1})}},{key:"handleDecrementAmount",value:function(){this.setState({amount:Math.max(0,this.state.amount-1)})}},{key:"render",value:function(){var e=this.state,t=e.processing,n=e.amount,r=this.props,i=r.onHide,c=r.shown,o=r.item;return a.createElement(ue,{processing:t,onHide:i,shown:c,item:o,amount:n,handleChangeAmount:this.handleChangeAmount.bind(this),handleDecrementAmount:this.handleDecrementAmount.bind(this),handleIncrementAmount:this.handleIncrementAmount.bind(this),handleSubmit:this.handleSubmit.bind(this)})}}]),t}(a.Component),he=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onHide,r=e.processing,i=this.props,c=i.name,o=i.description,s=this.props,l=s.handleChangeName,u=s.handleChangeDescription,m=s.handleSubmit;return a.createElement(re.a,{show:t,onHide:n},a.createElement(re.a.Header,{closeButton:!0},a.createElement(re.a.Title,null,"Add item")),a.createElement(re.a.Body,null,a.createElement(ie.a.Group,null,a.createElement(ie.a.Label,null,"Name"),a.createElement(ie.a.Control,{onChange:l,placeholder:"Enter name",value:c})),a.createElement(ie.a.Group,null,a.createElement(ie.a.Label,null,"Description (optional)"),a.createElement(ie.a.Control,{value:o,onChange:u,placeholder:"Enter description (optional)"}))),a.createElement(re.a.Footer,null,a.createElement(w.a,{variant:"outline-secondary",disabled:r,onClick:n},"Cancel"),a.createElement(w.a,{variant:"primary",disabled:r||!c,onClick:m},r&&a.createElement(ne,null)," Submit")))}}]),t}(a.Component),de=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state=void 0,n.state={processing:!1,name:"",description:""},n.handleChangeName=n.handleChangeName.bind(Object(y.a)(n)),n.handleChangeDescription=n.handleChangeDescription.bind(Object(y.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"handleSubmit",value:function(){var e=this,t=this.props.onHide,n=this.props,a=n.handleSuccess,r=n.handleError;this.setState({processing:!0}),_.requestCreate(this.state.name,this.state.description).then(function(e){ee.a.notify("\u2714 Successfully created item",{position:"bottom-right",duration:3e3}),a&&a()}).catch(function(e){console.log(e),ee.a.notify("\u274c Failed to create item: "+Z.parseError(e),{position:"bottom-right",duration:3e3}),r&&r(e)}).finally(function(){e.setState({processing:!1}),t()})}},{key:"render",value:function(){var e=this.props,t=e.onHide,n=e.shown,r=this.state,i=r.name,c=r.description,o=r.processing;return a.createElement(he,{onHide:t,shown:n,processing:o,name:i,description:c,handleChangeName:this.handleChangeName.bind(this),handleChangeDescription:this.handleChangeDescription.bind(this),handleSubmit:this.handleSubmit.bind(this)})}}]),t}(a.Component),pe=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onHide,r=e.name,i=e.description,c=e.processing,o=this.props,s=o.handleChangeDescription,l=o.handleSubmit;return a.createElement(re.a,{show:t,onHide:n},a.createElement(re.a.Header,{closeButton:!0},a.createElement(re.a.Title,null,"Edit item")),a.createElement(re.a.Body,null,a.createElement(ie.a.Group,null,a.createElement(ie.a.Label,null,"Name"),a.createElement(ie.a.Control,{value:r,disabled:!0,placeholder:"Enter name"})),a.createElement(ie.a.Group,null,a.createElement(ie.a.Label,null,"Description (optional)"),a.createElement(ie.a.Control,{value:i,onChange:s,placeholder:"Enter description (optional)"}))),a.createElement(re.a.Footer,null,a.createElement(w.a,{variant:"outline-secondary",disabled:c,onClick:n},"Cancel"),a.createElement(w.a,{variant:"primary",disabled:c||!r,onClick:l},c&&a.createElement(ne,null)," Submit")))}}]),t}(a.Component),be=function(e){function t(e){var n;Object(m.a)(this,t);var a=(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).props.item;return n.state={processing:!1,name:a?a.name:"",description:a?a.description:""},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.item;t&&t.name===this.state.name||this.setState({name:t?t.name:"",description:t?t.description:""})}},{key:"handleChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"handleSubmit",value:function(){var e=this,t=this.props,n=t.item,a=t.onHide,r=this.props,i=r.handleSuccess,c=r.handleError;this.setState({processing:!0}),_.requestEdit(n,this.state.description).then(function(e){ee.a.notify("\u2714 Successfully updated item",{position:"bottom-right",duration:3e3}),i&&i()}).catch(function(e){ee.a.notify("\u274c Failed to update item: "+Z.parseError(e),{position:"bottom-right",duration:3e3}),c&&c(e)}).finally(function(){e.setState({processing:!1}),a()})}},{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onHide;return a.createElement(pe,{shown:t,name:this.state.name,description:this.state.description,processing:this.state.processing,handleChangeDescription:this.handleChangeDescription.bind(this),handleSubmit:this.handleSubmit.bind(this),onHide:n})}}]),t}(a.Component),fe=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onHide,n=e.shown,r=e.item,i=e.processing,c=this.props.handleSubmit;return a.createElement(re.a,{show:n,onHide:t,backdrop:!i||"static"},a.createElement(re.a.Header,{closeButton:!i},a.createElement(re.a.Title,null,"Delete item")),a.createElement(re.a.Body,null,a.createElement("strong",null,"You are about to delete item: ",r&&r.name),a.createElement("br",null),a.createElement("strong",null,"Are you sure?")),a.createElement(re.a.Footer,null,a.createElement(w.a,{variant:"outline-secondary",disabled:i,onClick:t},"Cancel"),a.createElement(w.a,{variant:"danger",disabled:i,onClick:c},i&&a.createElement(ne,null)," Delete")))}}]),t}(a.Component),ve=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={processing:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleSubmit",value:function(){var e=this,t=this.props,n=t.item,a=t.onHide,r=this.props,i=r.handleSuccess,c=r.handleError;this.setState({processing:!0}),_.requestDelete(n).then(function(e){ee.a.notify("\u2714 Successfully deleted item",{position:"bottom-right",duration:3e3}),i&&i()}).catch(function(e){ee.a.notify("\u274c Failed to delete item: "+Z.parseError(e),{position:"bottom-right",duration:3e3}),c&&c(e)}).finally(function(){e.setState({processing:!1}),a()})}},{key:"render",value:function(){var e=this.props,t=e.onHide,n=e.shown,r=e.item,i=this.state.processing;return a.createElement(fe,{onHide:t,item:r,shown:n,processing:i,handleSubmit:this.handleSubmit.bind(this)})}}]),t}(a.Component),Ee=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onHide,n=e.shown,r=e.item,i=e.amount,c=e.processing,o=this.props,s=o.handleChangeAmount,l=o.handleDecrementAmount,u=o.handleIncrementAmount,m=o.handleSubmit;return a.createElement(re.a,{show:n,onHide:t,backdrop:!c||"static"},a.createElement(re.a.Header,{closeButton:!c},a.createElement(re.a.Title,null,"Restock item")),a.createElement(re.a.Body,null,a.createElement("strong",null,"You are restocking item: ",r&&r.name),a.createElement(ie.a.Group,{as:ce.a},a.createElement(oe.a,{sm:"6"},a.createElement(ie.a.Label,null,"Amount to restock: ")),a.createElement(oe.a,{sm:"4",className:"ml-auto"},a.createElement(se.a,{size:"sm"},a.createElement(se.a.Prepend,null,a.createElement(w.a,{disabled:i<=0,variant:"outline-secondary",onClick:l},a.createElement(I.a,{icon:"minus"}))),a.createElement(le.a,{value:i.toString(),onChange:s,type:"number"}),a.createElement(se.a.Append,null,a.createElement(w.a,{variant:"outline-secondary",onClick:u},a.createElement(I.a,{icon:"plus"}))))))),a.createElement(re.a.Footer,null,a.createElement(w.a,{variant:"outline-secondary",disabled:c,onClick:t},"Cancel"),a.createElement(w.a,{variant:"primary",disabled:c||0===i,onClick:m},c&&a.createElement(ne,null)," Submit")))}}]),t}(a.Component),Oe=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={amount:0,processing:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleSubmit",value:function(){var e=this,t=this.props,n=t.item,a=t.onHide,r=this.props,i=r.handleSuccess,c=r.handleError,o=this.state.amount;this.setState({processing:!0}),_.requestRestock(n,o).then(function(e){ee.a.notify("\u2714 Successfully restocked item",{position:"bottom-right",duration:3e3}),i&&i()}).catch(function(e){console.log(e),ee.a.notify("\u274c Failed to restock item: "+Z.parseError(e),{position:"bottom-right",duration:3e3}),c&&c(e)}).finally(function(){e.setState({processing:!1}),a()})}},{key:"handleChangeAmount",value:function(e){var t=Number.parseInt(e.target.value);t=Math.max(0,t),this.setState({amount:t})}},{key:"handleIncrementAmount",value:function(){this.setState({amount:this.state.amount+1})}},{key:"handleDecrementAmount",value:function(){this.setState({amount:Math.max(0,this.state.amount-1)})}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.shown,r=e.onHide,i=this.state,c=i.amount,o=i.processing;return a.createElement(Ee,{item:t,amount:c,shown:n,processing:o,onHide:r,handleChangeAmount:this.handleChangeAmount.bind(this),handleDecrementAmount:this.handleDecrementAmount.bind(this),handleIncrementAmount:this.handleIncrementAmount.bind(this),handleSubmit:this.handleSubmit.bind(this)})}}]),t}(a.Component),ye=n(421),ge=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.user,r=this.props,i=r.orderItem,c=r.editItem,o=r.deleteItem,s=r.restockItem,l=r.checkInventory;return a.createElement(ye.a,null,a.createElement(ye.a.Body,null,a.createElement(ye.a.Title,null,t.name,t.seller&&n.type===J.TYPE&&n.id===t.seller.id&&a.createElement(w.a,{variant:"link",className:"ml-1 text-secondary",onClick:function(){return l(t)},size:"sm"},a.createElement("small",null,"Details"))),a.createElement(ye.a.Text,null,t.description,a.createElement("br",null),a.createElement("small",null,"In stock: ",t.amount),a.createElement("br",null),!(t.seller&&n.type===J.TYPE&&n.id===t.seller.id)&&a.createElement("small",{className:"text-muted"},"Sold by ",t.seller&&t.seller.name)),t.seller&&n.type===J.TYPE&&n.id===t.seller.id&&a.createElement(a.Fragment,null,a.createElement(w.a,{variant:"secondary",onClick:function(){return s(t)}},"Restock"),a.createElement(w.a,{variant:"link",className:"text-secondary",onClick:function(){return c(t)}},"Edit"),a.createElement(w.a,{variant:"link",className:"text-secondary",onClick:function(){return o(t)}},"Delete")),n.type===K.TYPE&&a.createElement(w.a,{onClick:function(){return i(t)}},"Order")))}}]),t}(a.Component),je=n(414),ke=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.inventory,r=e.processing,i=e.shown,c=e.onHide;return a.createElement(re.a,{show:i,onHide:c},a.createElement(re.a.Header,{closeButton:!0},a.createElement(re.a.Title,null,"Inventory data for ",t.name)),a.createElement(re.a.Body,null,r?a.createElement(ae,null):a.createElement(je.a,null,a.createElement("tbody",null,n.changes.map(function(e,t){return a.createElement("tr",{key:t},a.createElement("td",null,e.amount),a.createElement("td",{className:"text-"+(e.amount<0?"danger":"success")},e.type))})))),a.createElement(re.a.Footer,null,a.createElement(w.a,{variant:"outline-secondary",onClick:c},"OK")))}}]),t}(a.Component),Se=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={processing:!0,inventory:new V("","",[])},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.shown,n=e.item;t&&this.requestInventory(n)}},{key:"requestInventory",value:function(e){var t=this;this.setState({processing:!0}),V.requestOfItem(e).then(function(e){t.setState({inventory:e})}).catch(function(e){ee.a.notify("\u274c Unable to request inventory: "+Z.parseError(e),{position:"bottom-right",duration:3e3})}).finally(function(){t.setState({processing:!1})})}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.shown,r=e.onHide,i=this.state,c=i.inventory,o=i.processing;return a.createElement(ke,{item:t,inventory:c,shown:n,processing:o,onHide:r})}}]),t}(a.Component),we=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state=void 0,n.state={addModalOpen:!1,orderModalOpen:!1,editModalOpen:!1,deleteModalOpen:!1,restockModalOpen:!1,inventoryModalOpen:!1,itemForOrder:new _("","",""),itemForEdit:new _("","",""),itemForDelete:new _("","",""),itemForRestock:new _("","",""),itemForInventory:new _("","","")},n.openAddModal=n.openAddModal.bind(Object(y.a)(n)),n.openOrderModal=n.openOrderModal.bind(Object(y.a)(n)),n.openEditModal=n.openEditModal.bind(Object(y.a)(n)),n.openDeleteModal=n.openDeleteModal.bind(Object(y.a)(n)),n.openRestockModal=n.openRestockModal.bind(Object(y.a)(n)),n.openInventoryModal=n.openInventoryModal.bind(Object(y.a)(n)),n.closeModal=n.closeModal.bind(Object(y.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"openAddModal",value:function(){this.setState({addModalOpen:!0})}},{key:"openOrderModal",value:function(e){this.setState({orderModalOpen:!0,itemForOrder:e})}},{key:"openEditModal",value:function(e){this.setState({editModalOpen:!0,itemForEdit:e})}},{key:"openDeleteModal",value:function(e){this.setState({deleteModalOpen:!0,itemForDelete:e})}},{key:"openRestockModal",value:function(e){this.setState({restockModalOpen:!0,itemForRestock:e})}},{key:"openInventoryModal",value:function(e){this.setState({inventoryModalOpen:!0,itemForInventory:e})}},{key:"closeModal",value:function(){this.setState({addModalOpen:!1,orderModalOpen:!1,editModalOpen:!1,deleteModalOpen:!1,restockModalOpen:!1,inventoryModalOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.loaded,r=t.items,i=t.user,c=t.refresh;return a.createElement("div",null,a.createElement("h2",null,"Items"," ",i&&i.type===J.TYPE&&a.createElement(w.a,{variant:"outline-dark",className:"ml-2",size:"sm",onClick:this.openAddModal},"Add")),n?a.createElement(te.a,{className:"mt-4"},0===r.length?a.createElement("p",null,"No items available"):r.map(function(t,n){return a.createElement(ge,{key:n,item:t,user:i,orderItem:e.openOrderModal,editItem:e.openEditModal,deleteItem:e.openDeleteModal,restockItem:e.openRestockModal,checkInventory:e.openInventoryModal})})):a.createElement(ae,null),i&&i.type===J.TYPE&&a.createElement(a.Fragment,null,a.createElement(Oe,{onHide:this.closeModal,shown:this.state.restockModalOpen,item:this.state.itemForRestock,handleSuccess:c}),a.createElement(de,{onHide:this.closeModal,shown:this.state.addModalOpen,handleSuccess:c}),a.createElement(be,{onHide:this.closeModal,shown:this.state.editModalOpen,item:this.state.itemForEdit,handleSuccess:c}),a.createElement(ve,{onHide:this.closeModal,shown:this.state.deleteModalOpen,item:this.state.itemForDelete,handleSuccess:c}),a.createElement(Se,{onHide:this.closeModal,shown:this.state.inventoryModalOpen,item:this.state.itemForInventory})),i&&i.type===K.TYPE&&a.createElement(me,{onHide:this.closeModal,shown:this.state.orderModalOpen,item:this.state.itemForOrder}))}}]),t}(a.Component),Ce=new R,Ie=new WebSocket(Ce.restServer.wsURL),xe=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={items:[],loaded:!1},n.requestItems.bind(Object(y.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.requestItems(),Ie.onmessage=function(t){switch(JSON.parse(t.data).$class){case"com.stockchainz.net.StockChanged":case"com.stockchainz.net.ItemModified":case"com.stockchainz.net.ItemCreated":case"com.stockchainz.net.ItemDeleted":e.requestItems()}}}},{key:"requestItems",value:function(){var e=this;this.setState({loaded:!1}),_.requestFetchAll().then(function(t){e.setState({items:t})}).catch(function(e){ee.a.notify("\u274c Cannot load items: "+Z.parseError(e),{position:"bottom-right",duration:3e3})}).finally(function(){e.setState({loaded:!0})})}},{key:"render",value:function(){var e=this.state,t=e.items,n=e.loaded,r=this.props.user;return a.createElement(we,{items:t,loaded:n,user:r,refresh:this.requestItems.bind(this)})}}]),t}(a.Component),Me=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={processing:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.sale,n=e.processing,r=e.confirmSale;return a.createElement(w.a,{size:"sm",onClick:function(){return r(t)},disabled:n},n?a.createElement(ne,null):a.createElement(I.a,{icon:"check"}))}}]),t}(a.Component),Ne=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={processing:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"confirmSale",value:function(e){var t=this;console.log(e);var n=this.props,a=n.handleSuccess,r=n.handleError;this.setState({processing:!0}),X.requestConfirm(e).then(function(t){ee.a.notify("\u2714 Successfully confirmed sale #".concat(e.id),{position:"bottom-right",duration:3e3}),a&&a()}).catch(function(e){ee.a.notify("\u274c Failed to confirm sale: "+Z.parseError(e),{position:"bottom-right",duration:3e3}),r&&r()}).finally(function(){t.setState({processing:!1})})}},{key:"render",value:function(){var e=this.state.processing,t=this.props.sale;return a.createElement(Me,{processing:e,sale:t,confirmSale:this.confirmSale.bind(this)})}}]),t}(a.Component),De=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.role,n=e.sales,r=e.refresh;return a.createElement(ye.a,{border:"secondary",className:"mb-3"},a.createElement(ye.a.Header,{as:"h5"},"Unconfirmed"),a.createElement(ye.a.Body,null,0===n.length?a.createElement("p",null,"No unconfirmed ",t===J.TYPE?"sales":"orders"," "):a.createElement(je.a,null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"#"),a.createElement("th",null,"Item"),a.createElement("th",null,"Amount"),t===J.TYPE&&a.createElement("th",null))),a.createElement("tbody",null,n.map(function(e,n){return a.createElement("tr",{key:n},a.createElement("td",null,U.truncate(e.id,5)),a.createElement("td",null,e.item.name),a.createElement("td",null,e.amount),t===J.TYPE&&a.createElement("td",null,a.createElement(Ne,{sale:e,handleSuccess:r})))})))))}}]),t}(a.Component),Re=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.role,n=e.sales;return a.createElement(ye.a,{border:"success"},a.createElement(ye.a.Header,{as:"h5"},"Confirmed"),a.createElement(ye.a.Body,null,0===n.length?a.createElement("p",null,"No unconfirmed ",t===J.TYPE?"sales":"orders"," "):a.createElement(je.a,null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"#"),a.createElement("th",null,"Item"),a.createElement("th",null,"Amount"))),a.createElement("tbody",null,n.map(function(e,t){return a.createElement("tr",{key:t},a.createElement("td",null,U.truncate(e.id,5)),a.createElement("td",null,e.item.name),a.createElement("td",null,e.amount))})))))}}]),t}(a.Component),Te=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.sales,n=e.role,r=e.loaded,i=e.refresh;return a.createElement("div",null,a.createElement("h2",null,n===J.TYPE?"Sales":"Orders"),r?a.createElement(ce.a,{className:"mt-4"},a.createElement(oe.a,null,a.createElement(De,{sales:t.filter(function(e){return!e.confirmed}),role:n,refresh:i})),a.createElement(oe.a,null,a.createElement(Re,{sales:t.filter(function(e){return e.confirmed}),role:n}))):a.createElement(ae,null))}}]),t}(a.Component),Ae=new R,Pe=new WebSocket(Ae.restServer.wsURL),qe=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={sales:[],loaded:!1},n.requestSales.bind(Object(y.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.requestSales(),Pe.onmessage=function(t){switch(JSON.parse(t.data).$class){case"com.stockchainz.net.OrderPlaced":case"com.stockchainz.net.SaleConfirmed":case"com.stockchainz.net.ItemDeleted":e.requestSales()}}}},{key:"requestSales",value:function(){var e=this;this.setState({loaded:!1}),X.requestFetchAll().then(function(t){e.setState({sales:t})}).catch(function(e){ee.a.notify("\u274c Cannot load sales: "+Z.parseError(e),{position:"bottom-right",duration:3e3})}).finally(function(){e.setState({loaded:!0})})}},{key:"render",value:function(){var e=this.props.role,t=this.state,n=t.sales,r=t.loaded;return a.createElement(Te,{role:e,sales:n,loaded:r,refresh:this.requestSales.bind(this)})}}]),t}(a.Component),He=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.handleSignout;return a.createElement(a.Fragment,null,a.createElement(A,{username:t.name,handleSignout:n}),a.createElement(j.a,{style:{marginTop:56},className:"pt-4"},a.createElement(xe,{user:t}),a.createElement("hr",null),a.createElement(qe,{role:t.type})))}}]),t}(a.Component),Fe=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.session,t=this.props.handleSignout;return e.loggedIn?e.user?a.createElement(He,{user:e.user,handleSignout:t}):a.createElement(g.c,{to:"/register"}):a.createElement(g.c,{to:"/signin"})}}]),t}(a.Component),Ye=new R,Le=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.createElement(j.a,{className:"d-flex flex-column justify-content-center align-items-center",style:{height:"100vh"}},a.createElement("h1",{className:"text-monospace"},"Sign in to access the site"),a.createElement(w.a,{href:Ye.restServer.authURL+"/google",variant:"outline-light",className:"border-danger text-danger font-weight-normal mt-2 px-3"},a.createElement(I.a,{icon:["fab","google"],className:"mr-2"}),a.createElement("span",null,"Sign in with Google")))}}]),t}(a.Component),Be=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.session;return e.loggedIn?a.createElement(g.c,{to:e.user?"/":"/register"}):a.createElement(Le,null)}}]),t}(a.Component),ze=n(420),Ue=n(205),We=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.createElement("span",null,a.createElement(ne,null),a.createElement("span",{className:"ml-2"},"Processing"))}}]),t}(a.Component),Ge=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.role,r=e.processing,i=this.props,c=i.handleChangeName,o=i.handleChangeRole,s=i.handleSubmit;return a.createElement(j.a,{className:"d-flex flex-column justify-content-center align-items-center",style:{height:"100vh"}},a.createElement(ye.a,{style:{maxWidth:"18rem"}},a.createElement(ye.a.Body,null,a.createElement("h3",{className:"mb-4"},"Register as a participant"),a.createElement(ie.a,null,a.createElement(ie.a.Group,{controlId:"name"},a.createElement(ie.a.Label,null,"Name"),a.createElement(ie.a.Control,{type:"text",placeholder:"Enter your name",value:t,onChange:c})),a.createElement(ie.a.Group,{controlId:"role"},a.createElement(ie.a.Label,{className:"d-block"},"Role"),a.createElement(ze.a,{name:"role",type:"radio",value:n,onChange:o},a.createElement(Ue.a,{variant:"light",value:J.TYPE,style:{cursor:"pointer"}},"Seller"),a.createElement(Ue.a,{variant:"light",value:K.TYPE,style:{cursor:"pointer"}},"Buyer"))),a.createElement(w.a,{className:"mt-2",variant:"primary",onClick:s,disabled:r},r?a.createElement(We,null):"Register")))))}}]),t}(a.Component),$e=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={name:"",role:J.TYPE,processing:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleChangeName",value:function(e){this.setState({name:e.currentTarget.value})}},{key:"handleChangeRole",value:function(e,t){this.setState({role:e})}},{key:"handleSubmit",value:function(){var e=this,t=this.state,n=t.name,a=t.role,r=this.props.handleRegister;this.setState({processing:!0});r(n,a,function(){e.props.history.push("/")},function(t){ee.a.notify("\u274c Unable to register: "+Z.parseError(t),{position:"bottom-right",duration:3e3}),e.setState({processing:!1})})}},{key:"render",value:function(){var e=this.props.session;if(!e.loggedIn)return a.createElement(g.c,{to:"/signin"});if(e.user)return a.createElement(g.c,{to:"/"});var t=this.state,n=t.name,r=t.role,i=t.processing;return a.createElement(Ge,{name:n,role:r,processing:i,handleChangeName:this.handleChangeName.bind(this),handleChangeRole:this.handleChangeRole.bind(this),handleSubmit:this.handleSubmit.bind(this)})}}]),t}(a.Component),Je=Object(g.k)($e),Ke=(n(407),n(408),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.createElement(j.a,{className:"d-flex flex-column justify-content-center align-items-center",style:{height:"100vh"}},a.createElement(ne,{size:"5x"}))}}]),t}(a.Component)),Qe=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.createElement(j.a,{className:"d-flex flex-column justify-content-center align-items-center",style:{height:"100vh"}},a.createElement("h1",null,a.createElement("span",{role:"img","aria-label":"error"},"\u274c")," Cannot connect to server. Please try again later"))}}]),t}(a.Component),_e=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.createElement(j.a,{className:"d-flex flex-column justify-content-center align-items-center",style:{height:"100vh"}},a.createElement("h1",null," Oh no! Where am I?"),a.createElement("p",null,"Go back ",a.createElement(f.Link,{to:"/"},"home")))}}]),t}(a.Component),Ve=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={disconnected:!1},n.handleSignin=n.handleSignin.bind(Object(y.a)(n)),n.handleRegister=n.handleRegister.bind(Object(y.a)(n)),n.handleSignout=n.handleSignout.bind(Object(y.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){var e=Object(O.a)(E.a.mark(function e(){var t;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.requestSession();case 3:t=e.sent,this.handleSignin(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({disconnected:!0}),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleSignin",value:function(e){this.setState({session:e})}},{key:"handleRegister",value:function(e,t,n,a){var r=this;$.requestRegister(e,t).then(function(e){r.handleSignin({loggedIn:!0,user:e}),n&&n()}).catch(function(e){ee.a.notify("\u274c Unable to register: "+Z.parseError(e),{position:"bottom-right",duration:3e3}),a&&a(e)})}},{key:"handleSignout",value:function(){$.requestSignout().then(function(e){window.location.reload()}).catch(function(e){ee.a.notify("\u274c Error in signing out: "+Z.parseError(e),{position:"bottom-right",duration:3e3})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.session;return t.disconnected?a.createElement(Qe,null):n?a.createElement(g.g,null,a.createElement(g.d,{path:"/signin",exact:!0,render:function(e){return a.createElement(Be,Object.assign({},e,{session:n}))}}),a.createElement(g.d,{path:"/register",exact:!0,render:function(t){return a.createElement(Je,Object.assign({},t,{session:n,handleRegister:e.handleRegister}))}}),a.createElement(g.d,{path:"/",exact:!0,render:function(t){return a.createElement(Fe,Object.assign({},t,{session:n,handleSignout:e.handleSignout}))}}),a.createElement(g.d,{exact:!1,render:function(e){return a.createElement(_e,e)}})):a.createElement(Ke,null)}}]),t}(a.Component),Xe=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.createElement(f.BrowserRouter,{basename:"/market1-app"},a.createElement(Ve,null))}}]),t}(a.Component);o.b.add(s.a,l.a,u.a),c.a.render(r.a.createElement(Xe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[206,1,2]]]);
//# sourceMappingURL=main.df7fb9f3.chunk.js.map